#!/usr/bin/env python3
"""
–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Fish Reports System.
–≠—Ç–æ—Ç —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞ Windows.
"""

import os
import sys
from pathlib import Path


def setup_environment():
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è."""
    # –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –º–æ–¥—É–ª—é
    if getattr(sys, 'frozen', False):
        # –ó–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ exe
        base_path = Path(sys._MEIPASS)
        # –í exe –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ
        sys.path.insert(0, str(base_path))
    else:
        # –ó–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ .py
        base_path = Path(__file__).parent
        # –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ src
        src_path = base_path / 'src'
        if src_path.exists():
            sys.path.insert(0, str(src_path))

def main():
    """–ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."""
    try:
        setup_environment()
        from fish_reports.gui.main_window import FishReportsApp

        print("üêü –ó–∞–ø—É—Å–∫ Fish Reports System...")
        print("–ï—Å–ª–∏ –æ–∫–Ω–æ –Ω–µ –ø–æ—è–≤–∏–ª–æ—Å—å, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–Ω–µ–ª—å –∑–∞–¥–∞—á")

        app = FishReportsApp()
        app.run()

    except ImportError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {e}")
        print("–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã")
        sys.exit(1)
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")
        sys.exit(1)

if __name__ == "__main__":
    main()
